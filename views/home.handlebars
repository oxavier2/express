<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">

    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"/> -->
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">


<!-- MAPSTYLE -->
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
    </style>
<!-- MAPSTYLE -->
  </head>

  <body onload="initMap()">

<!-- NAVBAR -->
    <div class="navbar-fixed">
      <nav>
        <div class="nav-wrapper deep-purple">
          <form>
            <div class="input-field">
              <input id="search" type="search" required>
              <label for="search"><i class="material-icons">search</i></label>
              <i class="material-icons">close</i>
            </div>
        </form>
        </div>
      </nav>
   </div>
<!-- NAVBAR -->
<!-- BUTTON -->
<div class="fixed-action-btn horizontal click-to-toggle" style="bottom: 45px; right: 24px;">
  <a class="btn-floating btn-large red">
    <i class="material-icons">menu</i>
  </a>
  <ul>
    <li><a class="btn-floating red"><i class="material-icons">insert_chart</i></a></li>
    <li><a class="btn-floating yellow darken-1"><i class="material-icons">format_quote</i></a></li>
    <li><a class="btn-floating green"><i class="material-icons">publish</i></a></li>
    <li><a class="btn-floating blue"><i class="material-icons">attach_file</i></a></li>
  </ul>
</div>
<!-- BUTTON -->
<!--Import jQuery before materialize.js-->
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
<script>$('.fixed-action-btn').openFAB();</script>
<script>$('.fixed-action-btn').closeFAB();</script>


<!-- MAPFUNCTION -->
    <div id="map"></div>
    <script>

    var map;
    var infowindow;
    var service;
    var coffee;
    var markers = [];
    var image = "https://cdn0.iconfinder.com/data/icons/beverage/64/SOFT_DRINK-24.png"

    function initMap() {

      navigator.geolocation.getCurrentPosition(function(position) {
        var myPos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        var mapOptions = {
            center: myPos,
            zoom: 15,
            styles: [{"featureType":"landscape","stylers":[{"hue":"#FFBB00"},{"saturation":43.400000000000006},{"lightness":37.599999999999994},{"gamma":1}]},{"featureType":"road.highway","stylers":[{"hue":"#FFC200"},{"saturation":-61.8},{"lightness":45.599999999999994},{"gamma":1}]},{"featureType":"road.arterial","stylers":[{"hue":"#FF0300"},{"saturation":-100},{"lightness":51.19999999999999},{"gamma":1}]},{"featureType":"road.local","stylers":[{"hue":"#FF0300"},{"saturation":-100},{"lightness":52},{"gamma":1}]},{"featureType":"water","stylers":[{"hue":"#0078FF"},{"saturation":-13.200000000000003},{"lightness":2.4000000000000057},{"gamma":1}]},{"featureType":"poi","stylers":[{"hue":"#00FF6A"},{"saturation":-1.0989010989011234},{"lightness":11.200000000000017},{"gamma":1}]}]
        };
        addMarker(myPos);
        map = new google.maps.Map(document.getElementById('map', mapOptions));
      });
    };

      // navigator.geolocation.getCurrentPosition(function(position) {
      //           var pos = {
      //             lat: position.coords.latitude,
      //             lng: position.coords.longitude
      //             };
      //           infoWindow.setPosition(pos);
      //           infoWindow.setContent('YOU R HERE');
      //           map.setCenter(pos);
        // coffee = {
        //     location: myPos,
        //     radius: 5000,
        //     types: ['cafe']
        // };

        // infowindow = new google.maps.InfoWindow();

        // service = new google.maps.places.PlacesService(map);

        // service.nearbySearch(coffee, points);

        // google.maps.event.addListener(map, 'rightclick', function(event){
        //     map.set(event.latLng)
        //     clearResults(markers)
        //     var coffee = {
        //       location: event.LatLng,
        //       radius: 5000,
        //       types: ['cafe']
        //     };
        //     service.nearbySearch(coffee, points);
        // });

    // };

    // function points(results, status) {
    //     if (status === google.maps.places.PlacesServiceStatus.OK) {
    //     for (var i = 0; i < results.length; i++) {
    //       markers.push(createMarker(results[i]));
    //       }
    //     }
    //   }

    // google.maps.event.addDomListener(window, 'load', initMap);

    function addMarker(position){
      var marker = new google.maps.Marker({
        map: map,
        animation: google.maps.Animation.DROP,
        icon: image,
        position: position
      });
    }
    // function createMarker(place) {
    //     var placeLoc = place.geometry.location;
    //     var marker = new google.maps.Marker({
    //         map: map,
    //         position: placeLoc,
    //         animation: google.maps.Animation.DROP,
    //         icon: image
    //         });
    //     google.maps.event.addListener(marker, 'click', function() {
    //         infowindow.setContent(place.name);
    //         infowindow.open(map, this);
    //         });
    //     return marker;
    // };

    // function clearResults(markers){
    //     for (var m in markers){
    //     markers[m].setMap(null)
    //     }
    //     markers = []
    //     };

    // function geolocator(){
    //     infoWindow = new google.maps.InfoWindow({map: map});
    //     if (navigator.geolocation) {
    //         navigator.geolocation.getCurrentPosition(function(position) {
    //           var pos = {
    //             lat: position.coords.latitude,
    //             lng: position.coords.longitude
    //             };
    //           infoWindow.setPosition(pos);
    //           infoWindow.setContent('YOU R HERE');
    //           map.setCenter(pos);
    //         }, function() {
    //           handleLocationError(true, infoWindow, map.getCenter());
    //         });
    //       } else {
    //         // Browser doesn't support Geolocation
    //         handleLocationError(false, infoWindow, map.getCenter());
    //       }
    //       function handleLocationError(browserHasGeolocation, infoWindow, pos) {
    //       infoWindow.setPosition(pos);
    //       infoWindow.setContent(browserHasGeolocation ?
    //                             'Error: The Geolocation service failed.' :
    //                             'Error: Your browser doesn\'t support geolocation.');
    // }
    // };
    //
    // // google.maps.event.addDomListener(window, 'load', initMap);
    </script>
     <!-- MAPFUNCTION -->
     <!-- MYAPIKEY -->
     <script src="https://maps.googleapis.com/maps/api/js?AIzaSyAyp9_d_tD2zbKUPwA2qRhytXw2kQ4tiM8&signed_in=true&libraries=places&callback=initMap" async defer></script>
     <!-- MYAPIKEY -->

  </body>
</html>
